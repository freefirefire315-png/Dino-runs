<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dino Run - Earn TON</title>
    <script src="https://app.adsgram.ai/js/adsgram-ad-sdk.js"></script>
    <style>
        * { padding: 0; margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; }
        body { background-color: #f7f7f7; touch-action: manipulation; }
        #game { width: 100vw; height: 200px; border-bottom: 2px solid #535353; margin-top: 50px; position: relative; background: #fff; }
        
        /* DINO STYLE */
        #dino { 
            width: 50px; height: 50px; position: absolute; bottom: 0; left: 50px; 
            background-image: url('https://img.icons8.com/color/96/t-rex.png'); 
            background-size: contain; background-repeat: no-repeat; z-index: 2; 
        }

        /* RUNNING ANIMATION (The animation you asked for) */
        .running { animation: dino-run 0.2s infinite; }
        
        @keyframes dino-run {
            0% { transform: rotate(0deg) translateY(0); }
            25% { transform: rotate(-10deg) translateY(-4px); }
            50% { transform: rotate(0deg) translateY(0); }
            75% { transform: rotate(10deg) translateY(-4px); }
            100% { transform: rotate(0deg) translateY(0); }
        }

        /* JUMP ANIMATION */
        .animate { animation: jump 0.5s linear; }
        @keyframes jump {
            0% { bottom: 0; }
            30% { bottom: 110px; }
            70% { bottom: 110px; }
            100% { bottom: 0; }
        }

        /* OBSTACLE */
        #cactus { 
            width: 40px; height: 40px; position: absolute; bottom: 0; right: -50px;
            background-image: url('https://img.icons8.com/color/96/cactus.png');
            background-size: contain; background-repeat: no-repeat;
            animation: move 1.6s infinite linear; 
        }

        @keyframes move {
            0% { right: -50px; }
            100% { right: 100%; }
        }

        #score { position: absolute; top: 10px; right: 20px; font-size: 20px; color: #535353; font-weight: bold; }
        
        /* OVERLAY SCREEN */
        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.9); display: none; flex-direction: column; 
            align-items: center; justify-content: center; color: white; z-index: 10; 
        }
        button { 
            padding: 15px 30px; font-size: 18px; cursor: pointer; border: none; 
            border-radius: 12px; background: #2ecc71; color: white; font-weight: bold; 
            margin-top: 10px; width: 260px; box-shadow: 0 4px #27ae60;
        }
        button:active { transform: translateY(2px); box-shadow: 0 2px #27ae60; }
    </style>
</head>
<body onclick="jump()">

    <div id="score">Score: 0</div>
    <div id="game">
        <div id="dino" class="running"></div>
        <div id="cactus"></div>
    </div>

    <div id="overlay">
        <h1 style="font-size: 45px; margin-bottom: 5px;">OUCH!</h1>
        <p id="final-score" style="font-size: 24px; margin-bottom: 20px;">Score: 0</p>
        <button onclick="showAd()">ðŸ“º WATCH AD TO REVIVE</button>
        <button style="background:#e74c3c; box-shadow: 0 4px #c0392b;" onclick="resetGame()">ðŸ”„ RESTART GAME</button>
    </div>

    <script>
        // --- CONFIGURATION WITH YOUR BLOCK ID ---
        const adBlockId = "19286"; 
        const AdController = window.Adsgram.init({ blockId: adBlockId });
        
        const dino = document.getElementById("dino");
        const cactus = document.getElementById("cactus");
        const scoreElement = document.getElementById("score");
        const overlay = document.getElementById("overlay");
        
        let score = 0;
        let isGameOver = false;

        function jump() {
            if (isGameOver) return;
            if (dino.classList.contains("animate")) return;
            
            dino.classList.remove("running"); // Stop "stepping" in the air
            dino.classList.add("animate");    
            
            setTimeout(function() {
                dino.classList.remove("animate");
                if(!isGameOver) dino.classList.add("running"); // Resume running on landing
            }, 500);
        }

        // Collision Detection Loop
        let checkDead = setInterval(function() {
            let dinoBottom = parseInt(window.getComputedStyle(dino).getPropertyValue("bottom"));
            let cactusLeft = parseInt(window.getComputedStyle(cactus).getPropertyValue("left"));

            if (cactusLeft < 85 && cactusLeft > 50 && dinoBottom <= 40) {
                gameOver();
            } else if (!isGameOver) {
                score++;
                scoreElement.innerHTML = "Score: " + Math.floor(score / 10);
            }
        }, 10);

        function gameOver() {
            isGameOver = true;
            cactus.style.animation = "none"; 
            dino.classList.remove("running");
            overlay.style.display = "flex";
            document.getElementById("final-score").innerHTML = "Score: " + Math.floor(score / 10);
        }

        async function showAd() {
            try {
                const result = await AdController.show();
                if (result.done) {
                    revive();
                } else {
                    alert("Finish the ad to get back in the game!");
                }
            } catch (e) {
                alert("Ads are currently unavailable.");
            }
        }

        function revive() {
            isGameOver = false;
            overlay.style.display = "none";
            cactus.style.right = "-100px"; // Move cactus away so you don't die instantly
            cactus.style.animation = "move 1.6s infinite linear";
            dino.classList.add("running");
        }

        function resetGame() {
            location.reload();
        }
    </script>
</body>
</html>
