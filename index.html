<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://adsgram.ai/sdk.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Courier New', Courier, monospace; background: #f7f7f7; touch-action: none; }
        #game { width: 100vw; height: 200px; background: white; position: relative; border-bottom: 2px solid #535353; margin-top: 100px; }
        
        /* THE DINO - Flipped to face Right */
        #dino { 
            width: 40px; height: 40px; position: absolute; bottom: 0; left: 40px; 
            font-size: 40px; display: flex; align-items: center; justify-content: center; 
            z-index: 10; transform: scaleX(-1); /* This flips the dino! */
        }
        
        .cactus { width: 30px; height: 40px; position: absolute; bottom: 0; font-size: 30px; display: flex; align-items: center; justify-content: center; }
        #score { color: #535353; padding: 20px; font-size: 24px; text-align: right; font-weight: bold; }
        #restart { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border: 2px solid #535353; border-radius: 8px; text-align: center; z-index: 100; }
    </style>
</head>
<body onclick="jump()" ontouchstart="jump()">
    <div id="score">00000</div>
    <div id="game">
        <div id="dino">ðŸ¦–</div>
    </div>
    <div id="restart">
        <h2 style="color:#535353; margin:0">G A M E  O V E R</h2>
        <button onclick="location.reload()" style="background:#535353; color:white; border:none; padding:10px 20px; margin-top:15px; cursor:pointer;">RESTART</button>
    </div>

    <script>
        let dino = document.getElementById("dino");
        let scoreTxt = document.getElementById("score");
        let score = 0;
        let isJumping = false;
        let gameOver = false;

        function jump() {
            if (isJumping || gameOver) return;
            isJumping = true;
            
            let position = 0;
            // Upward movement
            let upTimer = setInterval(() => {
                if (position >= 120) {
                    clearInterval(upTimer);
                    // Downward movement
                    let downTimer = setInterval(() => {
                        if (position <= 0) {
                            clearInterval(downTimer);
                            isJumping = false;
                            position = 0;
                        }
                        position -= 5;
                        dino.style.bottom = position + "px";
                    }, 15);
                }
                position += 5;
                dino.style.bottom = position + "px";
            }, 15);
        }

        function createCactus() {
            if (gameOver) return;
            let cactus = document.createElement("div");
            cactus.classList.add("cactus");
            cactus.innerHTML = "ðŸŒµ";
            document.getElementById("game").appendChild(cactus);
            
            let cactusLeft = window.innerWidth;
            let moveCactus = setInterval(() => {
                if (gameOver) { clearInterval(moveCactus); return; }
                cactusLeft -= 7;
                cactus.style.left = cactusLeft + "px";

                let dinoBottom = parseInt(dino.style.bottom) || 0;

                // Collision detection (Checking if Dino and Cactus hit)
                if (cactusLeft < 80 && cactusLeft > 40 && dinoBottom < 40) {
                    gameOver = true;
                    document.getElementById("restart").style.display = "block";
                }

                if (cactusLeft < -50) {
                    clearInterval(moveCactus);
                    cactus.remove();
                    score++;
                    scoreTxt.innerText = score.toString().padStart(5, '0');
                }
            }, 20);
            
            setTimeout(createCactus, Math.random() * 2000 + 1000);
        }

        createCactus();
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
    </script>
</body>
</html>
