<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://adsgram.ai/sdk.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Courier New', Courier, monospace; background: #f7f7f7; }
        #game { width: 100vw; height: 200px; background: white; position: relative; border-bottom: 2px solid #535353; margin-top: 100px; }
        /* The Dino Sprite */
        #dino { width: 40px; height: 40px; position: absolute; bottom: 0; left: 20px; font-size: 40px; line-height: 40px; display: flex; align-items: center; justify-content: center; transition: bottom 0.1s; z-index: 10; }
        /* The Cactus Sprite */
        .cactus { width: 30px; height: 40px; position: absolute; bottom: 0; right: -50px; font-size: 30px; display: flex; align-items: center; justify-content: center; }
        #score { color: #535353; padding: 20px; font-size: 24px; text-align: right; font-weight: bold; }
        #restart { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border: 2px solid #535353; border-radius: 8px; text-align: center; z-index: 100; }
        .cloud { position: absolute; font-size: 20px; color: #d3d3d3; z-index: 1; }
    </style>
</head>
<body onclick="jump()">
    <div id="score">00000</div>
    <div id="game">
        <div id="dino">ðŸ¦–</div>
    </div>
    <div id="restart">
        <h2 style="color:#535353; margin:0">G A M E  O V E R</h2>
        <button onclick="location.reload()" style="background:#535353; color:white; border:none; padding:10px 20px; margin-top:15px; cursor:pointer; font-weight:bold;">RESTART</button>
    </div>

    <script>
        let dino = document.getElementById("dino");
        let scoreTxt = document.getElementById("score");
        let score = 0;
        let isJumping = false;
        let gameOver = false;

        function jump() {
            if (isJumping || gameOver) return;
            isJumping = true;
            let startPos = 0;
            let upInterval = setInterval(() => {
                if (startPos >= 100) {
                    clearInterval(upInterval);
                    let downInterval = setInterval(() => {
                        if (startPos <= 0) {
                            clearInterval(downInterval);
                            isJumping = false;
                        }
                        startPos -= 5;
                        dino.style.bottom = startPos + "px";
                    }, 20);
                }
                startPos += 5;
                dino.style.bottom = startPos + "px";
            }, 20);
        }

        function createCactus() {
            if (gameOver) return;
            let cactus = document.createElement("div");
            cactus.classList.add("cactus");
            cactus.innerHTML = "ðŸŒµ"; // Real Cactus Icon
            document.getElementById("game").appendChild(cactus);
            
            let pos = window.innerWidth;
            let move = setInterval(() => {
                if (gameOver) { clearInterval(move); return; }
                pos -= 7; // Speed of cactus
                cactus.style.left = pos + "px";

                let dinoBottom = parseInt(window.getComputedStyle(dino).getPropertyValue("bottom"));
                
                // Professional Collision Logic
                if (pos < 50 && pos > 20 && dinoBottom < 35) {
                    gameOver = true;
                    document.getElementById("restart").style.display = "block";
                }

                if (pos < -50) {
                    clearInterval(move);
                    cactus.remove();
                    score++;
                    scoreTxt.innerText = score.toString().padStart(5, '0');
                }
            }, 20);
            
            let nextSpawn = Math.random() * 1500 + 800;
            setTimeout(createCactus, nextSpawn);
        }

        // Add some floating clouds for decoration
        function createCloud() {
            if (gameOver) return;
            let cloud = document.createElement("div");
            cloud.classList.add("cloud");
            cloud.innerHTML = "â˜ï¸";
            cloud.style.top = Math.random() * 80 + "px";
            document.getElementById("game").appendChild(cloud);
            let pos = window.innerWidth;
            let moveCloud = setInterval(() => {
                pos -= 1;
                cloud.style.left = pos + "px";
                if (pos < -50) { clearInterval(moveCloud); cloud.remove(); }
            }, 30);
            setTimeout(createCloud, 5000);
        }

        createCactus();
        createCloud();
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
    </script>
</body>
</html>
